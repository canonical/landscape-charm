[stores]
user = landscape
password = b64:bGFuZHNjYXBl
# sslmode=verify-full
# sslrootcert=/path/to/root-ca.crt
# sslcert=/path/to/client.crt
# sslkey=/path/to/client.key
host = localhost
main = landscape-test-main
account-1 = landscape-test-account-1
resource-1 = landscape-test-resource-1
package = landscape-test-package
session = landscape-test-session
session-autocommit = landscape-test-session?isolation=autocommit
knowledge = landscape-test-knowledge

[global]
# Syslog address is either a socket path or server:port string.
syslog-address = /dev/log
deployment-mode = default
root-url = http://localhost:8080/
pidfile-directory = /tmp/landscape

[oops]
path = /tmp/landscape-oops
amqp-key = landscape-oops
# Using an empty exchange makes the message go to a queue named after the key.
# See https://www.rabbitmq.com/tutorials/amqp-concepts.html#exchange-default
amqp-exchange = 

[broker]
port = 5672
host = localhost
user = landscape
password = b64:bGFuZHNjYXBl
vhost = landscape
hostagent_virtual_host = landscape-hostagent
hostagent_task_queue = landscape-server-hostagent-task-queue
hostagent_ping_queue = landscape-server-hostagent-ping-queue

[load-shaper]
critical-load = 20.0
good-load = 10.0
good-duration = 60.0

[landscape]
base-port = 8080
threads = 8
stores = main account-1 resource-1 package session session-autocommit knowledge
oops-key = DFA
devmode = on
mailer = default
mailer-path = /tmp/landscape-mail-queue
repository-path = /tmp/landscape-repository
juju-homes-path = /var/tmp/juju-homes
ubuntu-images-path = /var/tmp/ubuntu-images
secret-token = 2d3dbbcb171b6c3e5446922f4ef85f5d080ff5429addb08037081bcdb6faae4aac482f1d2a970b88dd0f3083b64872efa338b699d9e6419010ca966718785ec4
openid-provider-url = http://fake-openid.local/openid
openid-logout-url = http://localhost:9500/openidlogout?success_to=http%%3A%%2F%%2Flocalhost%%3A8080%%2F&submit=true
enable-subdomain-accounts = true
enable-password-authentication = true
# Only one auth provider should be used at a time.
# If oidc is to be used, comment above openid- config and uncomment oidc-.
#oidc-issuer = http://localhost:8080/oidc
#oidc-client-id = develclient
#oidc-client-secret = develsecret
sanitize-delay = 3600
blob-storage-root = /tmp/landscape/blobs/
enable-saas-metrics = true
#display-consent-banner-at-each-login = false
#allowed_interfaces = localhost 127.0.0.1 ::1

[message-server]
base-port = 8089
threads = 2
stores = main account-1 resource-1 package
max-msg-size-bytes = 10000000
message-snippet-bytes = 1000
enable-metrics = true
#allowed_interfaces = localhost 127.0.0.1 ::1

[pingserver]
base-port = 8081
stores = main account-1 resource-1
threads = 2
pingtracker-window-duration = 5
pingtracker-window-ping-limit = 10
pingtracker-penalty-window-duration = 120
enable-metrics = true
#allowed_interfaces = localhost 127.0.0.1 ::1

[job-handler]
stores = main account-1 resource-1 package
threads = 20
mailer = queue
mailer-path = /tmp/landscape-mail-queue

[async-frontend]
base-port = 19090
#allowed_interfaces = localhost 127.0.0.1 ::1

[api]
stores = main account-1 resource-1 package session
threads = 10
base-port = 9091
root-url = http://localhost:9091
mailer = queue
mailer-path = /tmp/landscape-mail-queue
devmode = on
snap-store-api-url = https://api.snapcraft.io/v2
cors-allow-all = 1
enable-metrics = true
#allowed_interfaces = localhost 127.0.0.1 ::1

[maintenance]
threads = 1
stores = main account-1 resource-1 package session session-autocommit knowledge
mailer = queue
mailer-path = /tmp/landscape-mail-queue

[schema]
threads = 1
stores = main account-1 resource-1 package session knowledge
store_user = landscape_superuser
store_password = landscape
# sslmode=verify-full
# sslrootcert=/path/to/root-ca.crt
# sslcert=/path/to/client.crt
# sslkey=/path/to/client.key

[scripts]
threads = 1
stores = main account-1 resource-1 package session knowledge
mailer = queue
mailer-path = /tmp/landscape-mail-queue

[package-upload]
stores = main account-1
threads = 2
port = 9090
root-url = http://localhost:9090
mailer = queue
mailer-path = /tmp/landscape-mail-queue
enable-metrics = true
#allowed_interfaces = localhost 127.0.0.1 ::1

[package-search]
port = 9099
stores = main package resource-1
account-threshold = 5
pid-path = /tmp/package-search.pid
#allowed_interfaces = localhost 127.0.0.1 ::1

[package_search]
host = localhost

[backoff]
backoff-dirpath = ./configs

[secrets]
secrets-url = http://localhost:8200
secrets-service-url = http://localhost:26155
#allowed_interfaces = localhost 127.0.0.1 ::1

[hostagent-message-consumer]
threads = 1
stores = main account-1 resource-1

[hostagent-message-server]
threads = 1
stores = main
#allowed_interfaces = localhost 127.0.0.1 ::1

[ubuntu-installer-attach-message-server]
threads = 1
stores = main account-1
#allowed_interfaces = localhost 127.0.0.1 ::1

[fake-openid]
# Changes here must be reflected in the dev HAProxy configuration, too.
port = 9500
root-url = http://fake-openid.local/

[features]
enable-employee-management = false
enable-script-profiles = false
enable-usg-profiles = false
enable-support-provider-login = true
enable-wsl-child-instance-profiles = false
enable-self-service-payg = true
enable-self-service-account-creation = true

[pppa-proxy]
supported-releases = 23.03 24.04
